local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer


if game.PlaceId ~= 16732694052 then
return -- Exit the script if not in the desired place
end


local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "DarkDupeGUI | لائحة تكرار دارك"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false  -- Keep GUI after respawn

local function createGui()
-- Create frame and buttons
local Frame = Instance.new("Frame")
Frame.BackgroundColor3 = Color3.new(1, 1, 1)
Frame.BorderSizePixel = 0
Frame.Position = UDim2.new(0.75, 0, 0.1, 0)
Frame.Size = UDim2.new(0, 200, 0, 100)
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Text = "Dark Dupe"
Title.Size = UDim2.new(0.8, 0, 0.2, 0)
Title.Position = UDim2.new(0.1, 0, 0, 0)
Title.Parent = Frame

local DupeButton = Instance.new("TextButton")
DupeButton.Text = "تكرار التفعيل"
DupeButton.Position = UDim2.new(0.1, 0, 0.3, 0)
DupeButton.Size = UDim2.new(0.8, 0, 0.2, 0)
DupeButton.Parent = Frame

local ToggleButton = Instance.new("TextButton")
ToggleButton.BackgroundColor3 = Color3.fromRGB(128, 128, 128)
ToggleButton.Position = UDim2.new(0.7, 0, 0.1, 0)
ToggleButton.Size = UDim2.new(0.2, 0, 0.1, 0)
ToggleButton.Text = ""
ToggleButton.Parent = Frame

local CloseButton = Instance.new("TextButton")
CloseButton.Text = "X"
CloseButton.Position = UDim2.new(0.9, 0, 0, 0)
CloseButton.Size = UDim2.new(0.1, 0, 0.1, 0)
CloseButton.Parent = Frame

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Text = "-"
MinimizeButton.Position = UDim2.new(0.8, 0, 0, 0)
MinimizeButton.Size = UDim2.new(0.1, 0, 0.1, 0)
MinimizeButton.Parent = Frame

local MinimizedHolder = Instance.new("Frame")
MinimizedHolder.BackgroundColor3 = Color3.new(1, 1, 1)
MinimizedHolder.Size = UDim2.new(0, 50, 0, 50)
MinimizedHolder.Visible = false
MinimizedHolder.Parent = ScreenGui

local MinimizedButton = Instance.new("TextButton")
MinimizedButton.BackgroundColor3 = Color3.new(1, 1, 1)
MinimizedButton.Size = UDim2.new(1, 0, 1, 0)
MinimizedButton.Text = "DK"  -- Add text "DK"
MinimizedButton.Parent = MinimizedHolder

-- Rainbow effect
local function updateRainbowColor()
local hue = tick() % 5 / 5
Frame.BackgroundColor3 = Color3.fromHSV(hue, 1, 1)
MinimizedButton.BackgroundColor3 = Color3.fromHSV(hue, 1, 1)
RunService.RenderStepped:Wait()
end

RunService.RenderStepped:Connect(updateRainbowColor)

-- Button functions
local isAppraising = false
local appraiseConnection

local function startAppraise()
isAppraising = true
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
appraiseConnection = RunService.Heartbeat:Connect(function()
ReplicatedStorage.events.equiprod:FireServer("Flimsy Rod")
wait(0.1)
ReplicatedStorage.events.equiprod:FireServer("Rod Of The Depths")
wait(0.1)
ReplicatedStorage.events.equiprod:FireServer("Flimsy Rod")
wait(0.1)
end)
end

local function stopAppraise()
isAppraising = false
ToggleButton.BackgroundColor3 = Color3.fromRGB(128, 128, 128)
if appraiseConnection then
appraiseConnection:Disconnect()
end
end

ToggleButton.MouseButton1Click:Connect(function()
if isAppraising then
stopAppraise()
else
startAppraise()
end
end)

DupeButton.MouseButton1Click:Connect(function()
if isAppraising then
stopAppraise()
else
startAppraise()
end
end)

CloseButton.MouseButton1Click:Connect(function()
ScreenGui:Destroy()
end)

MinimizeButton.MouseButton1Click:Connect(function()
Frame.Visible = false
MinimizedHolder.Visible = true
MinimizedHolder.Position = Frame.Position
end)

MinimizedButton.MouseButton1Click:Connect(function()
Frame.Visible = true
MinimizedHolder.Visible = false
end)


-- Show notification
local function showNotification()
StarterGui:SetCore("SendNotification", {
Title = "تم التفعيل ✅| بواسطة دارك ريبر ✅",
Text = "تم تفعيل السكربت بنجاح ✅| السكربت تم انشاءه بواسطة دارك ريبر
Discord: .w9k",
Duration = 5
})
end

-- Call notification after creating the GUI
showNotification()
end

createGui()

-- Listen to character spawn to ensure GUI stays active
LocalPlayer.CharacterAdded:Connect(function(char)
wait(1) -- Wait for character to load
createGui()
end)
